var InfoxCtx904={loaded:false,tID:null,toElem:null,checkScroll:false,renderCallback:null,horizontalScroll:false,verticalScroll:0,refreshBlock:false,zeroPixel:null,trackIds:null,newTrackIds:null,nItems:0,stopTrack:false,ie10Arr:null,getXmlHttp:function(){var a;try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(d){try{a=new ActiveXObject("Microsoft.XMLHTTP")}catch(c){a=false}}if(!a){var b=window.XDomainRequest||window.XMLHttpRequest;a=new b()}if("withCredentials" in a){a.withCredentials=true}return a},loadJS:function(b,c,a){var d=document.createElement("script");d.src=b;d.onload=c;d.onerror=c;a.appendChild(d)},checkABlock:function(a){if(window.rbInfoxAdBlock==false){a(false)}else{this.loadJS("https://rb.infox.sg/js/ads.js",function(){a(window.rbInfoxAdBlock!=false)},document.body)}},loadNow:function(){if(this.loaded){return false}this.loaded=true;window.removeEventListener("scroll",this);if(this.ie10Arr!=null){this.writeItems(this.ie10Arr)}else{var a=this;a.checkABlock(function(d){if(window.infoxContextAsyncIdx===undefined){window.infoxContextAsyncIdx=0}var b=window.infoxContextAsyncIdx;window.infoxContextAsyncIdx+=5;var c=a.getXmlHttp();c.open("GET","https://rb.infox.sg/json?id=904&adblock="+d+"&o="+b,true);c.onreadystatechange=function(){if(c.readyState==4){var e=JSON.parse(c.responseText);a.writeItems(e)}};c.send()})}return true},writeItems:function(arr){if(arr.length>0){var self=this;if(arr.length==1&&arr[0].code!=null){this.toElem.innerHTML=arr[0].code;var arr=this.toElem.getElementsByTagName("script");for(var n=0;n<arr.length;n++){eval(arr[n].innerHTML)}}else{var html="<style type='text/css'>.adf_sg_vstv {position: relative;width: 100%;margin: 0px 0;}.adf_sg_vstv a img {border: none;}.adf_sg_vstv .asg2_row div {float: left;position: relative;width: 100%;}.adf_sg_vstv .asg2_row {overflow: hidden;padding: 7px 0px 10px 0px;}.adf_sg_vstv .asg2_l {display: block;font-weight: 700;font-family: 'DIN Pro';color: #000;padding: 8px 0px 10px 10px;background-color: #EDEDED;}.adf_sg_vstv .asg2_row {line-height: 14px;border-top: 1px solid #e6e6e6;}.adf_sg_vstv .asg2_row:first-child {border-top: none;}.adf_sg_vstv .asg2_row a:first-child {display: block;overflow: hidden;position: relative;width: 55px;height: 39px;float: left;margin-right: 10px;margin-top: 3px;}.adf_sg_vstv .asg2_row img {height: 39px;position: relative;}.adf_sg_vstv .asg2_row a[title] {text-align: left;color: #000;font: 14px Arial,Tahoma,Verdana,Geneva,Helvetica,sans-serif;text-decoration: none;display: block;font-size: 1.6em;line-height: 16px;font-family: 'DIN Pro';}.adf_sg_vstv .asg2_row a[title]:hover {text-decoration: underline;}.adf_sg_vstv .adf_sg_vstv_inner {border: 1px solid #d4d4d4 !important;background-color: #fff;padding: 0 10px 0px 10px;}</style>    <div class='adf_sg_vstv'>    <div class='asg2_l'>    <img src='//banners.adfox.ru/170127/adfox/644518/logo_sg.png' width='120' target='_blank'>    </div>    <div class='adf_sg_vstv_inner'>    ";if(this.horizontalScroll){html+="<style>#rb904scc{overflow-x: scroll;overflow-y:hidden;width: auto;white-space:nowrap;}#rb904scc>*{display: inline-block;white-space:normal;}</style><div id='rb904scc'>"}for(var i=0;i<arr.length;i++){var item=arr[i];html+=this.buildItem(item,i);this.nItems++}if(this.horizontalScroll){html+="</div>"}html+="    </div>    </div>";html+="";this.toElem.innerHTML=html;if(this.horizontalScroll){var scont=document.getElementById("rb904scc");this.trackIds=[];var checkItems=function(){var from=scont.scrollLeft;var to=scont.clientWidth+from;var childs=scont.childNodes;var x=0;self.newTrackIds=[];for(var i in childs){var child=childs[i];if(typeof child.hasAttribute==="function"&&child.hasAttribute("rbid")){var x2=x+child.offsetWidth;if((from<=x&&to>=x)||(from<=x2&&to>=x2)){var id=child.getAttribute("rbid");if(self.trackIds.indexOf(id)<0){self.trackIds.push(id);self.newTrackIds.push(id)}}x=x2}}return self.newTrackIds.length>0};scont.addEventListener("scroll",function(evt){if(checkItems()){self.trackOnScroll()}});checkItems()}if(this.ie10Arr==null){this.toElem.addEventListener("click",function(e){var element=self.findItem(e.target);if(!element){return}self.refreshElements(element.parentNode,new Array(element))});if(this.refreshBlock){var onchange=function(){if(document.visibilityState!="hidden"){var container=self.findContainer(self.toElem);self.refreshElements(container,container.childNodes)}};var hidden="hidden";if(hidden in document){document.addEventListener("visibilitychange",onchange)}else{if((hidden="mozHidden") in document){document.addEventListener("mozvisibilitychange",onchange)}else{if((hidden="webkitHidden") in document){document.addEventListener("webkitvisibilitychange",onchange)}else{if((hidden="msHidden") in document){document.addEventListener("msvisibilitychange",onchange)}else{if("onfocusin" in document){document.onfocusin=document.onfocusout=onchange}else{window.onpageshow=window.onpagehide=window.onfocus=window.onblur=onchange}}}}}}}}if(this.checkScroll){window.addEventListener("scroll",this)}if(this.zeroPixel){var img=document.createElement("img");img.setAttribute("src",this.zeroPixel);img.setAttribute("width","1");img.setAttribute("height","1");img.setAttribute("style","display: none");document.getElementsByTagName("body")[0].appendChild(img)}this.trackOnScroll();if(self.renderCallback){self.renderCallback()}}},refreshElements:function(d,g){var a=this;var c="";var f=d.childNodes;for(var b in f){var h=f[b];if(typeof h.hasAttribute==="function"&&h.hasAttribute("rbid")){if(c.length>0){c+=","}c+=h.getAttribute("rbid")}}var e=a.getXmlHttp();e.open("GET","https://rb.infox.sg/json?id=904&n="+g.length+"&exclude="+c,true);e.onreadystatechange=function(){if(e.readyState==4){var j=JSON.parse(e.responseText);var n=0;for(var l in j){var k=null;while(n<g.length){k=g[n++];if(typeof k.hasAttribute==="function"&&k.hasAttribute("rbid")){break}}var m=a.buildItem(j[l],k.getAttribute("rbpos"));if(k){k.insertAdjacentHTML("afterend",m);k.parentNode.removeChild(k)}else{d.append(m)}}if(j.length>0){a.trackOnScroll();if(a.renderCallback){a.renderCallback()}}}};e.send()},buildItem:function(c,b){var d="<div class='asg2_row'>    <a href='{url}' target='_blank'>    <img src='{img}'>    </a>    <a href='{url}' title='' target='_blank'>    {title}    </a>    </div>";d=d.replace(/\{url\}/g,c.url).replace(/\{img\}/g,c.img).replace(/\{width\}/g,c.width).replace(/\{height\}/g,c.height).replace(/\{title\}/g,c.title).replace(/\{category\}/g,c.category).replace(/\{body\}/g,c.body||"").replace(/\{source\}/g,c.source||"").replace(/\{bg_rgb\}/g,c.bg_rgb||"").replace(/\{bg_hex\}/g,c.bg_hex||"").replace(/\{text_color\}/g,c.text_color||"").replace(/\{n\}/g,b);d=this.fixLinkTarget(c.linkTarget,d);var a=d.indexOf(">");if(a>0){d=d.substr(0,a)+" rbn='"+b+"' rbid='"+c.id+"'"+d.substr(a)}return d},findItem:function(a){if(a.hasAttribute("rbid")){return a}if(a.parentNode){return this.findItem(a.parentNode)}return null},findContainer:function(c){var d=c.childNodes;for(var b in d){var e=d[b];if(typeof e.hasAttribute==="function"&&e.hasAttribute("rbid")){return c}var a=this.findContainer(e);if(a){return a}}return null},fixLinkTarget:function(b,a){if(b!="byDefault"){a=a.replace(/target=["'][^'"]*["']/g,"");if(b=="blank"){a=a.replace(/href=/g,' target="_blank" href=')}}return a},shuffle:function(d){var c=d.length,b,a;while(0!==c){a=Math.floor(Math.random()*c);c-=1;b=d[c];d[c]=d[a];d[a]=b}return d},positions:function(){var e=window.pageYOffset||document.documentElement.scrollTop;var b=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;var c=this.toElem.getBoundingClientRect();var f=this.toElem.clientTop||0;var d=c.top+e-f;var a=this.toElem.offsetHeight;return{isLoadPosition:function(){return e+b>d},isTrackPosition:function(){return e+b>d+a/2&&d+a>e}}},loadOnScroll:function(){if(this.loaded){return true}var a=this.positions();if(a.isLoadPosition()){this.loadNow();return true}return false},trackOnScroll:function(){var c=this.positions();if(c.isTrackPosition()||!this.checkScroll){var a=this;if(!this.stopTrack&&!this.tId){this.tId=setTimeout(function(){if(a){if(a.loaded){window.removeEventListener("scroll",a)}a.stopTrack=true;var d=a.getXmlHttp();d.open("GET","https://rb.infox.sg/track"+(a.newTrackIds!==null&&a.newTrackIds.length>0?"?ids="+a.newTrackIds.toString():""),true);d.onreadystatechange=function(){if(d.readyState==4){a.stopTrack=false}};d.send(null);if(a.newTrackIds){a.newTrackIds=[]}}},1000)}if(this.loaded&&this.verticalScroll>this.nItems){var b=document.createElement("div");this.toElem.append(b);this.loaded=false;this.init(b)}}else{if(this.tId){clearTimeout(this.tId);this.tId=null}}return},handleEvent:function(a){if(this.loaded){this.trackOnScroll()}else{this.loadOnScroll()}},init:function(a){this.toElem=a;if(this.checkScroll){if(!this.loadOnScroll()){window.addEventListener("scroll",this)}}else{this.loadNow()}}};var INFOX904={renderTo:function(b){var c=document.getElementById(b);if(!c){return}var a=Object.create(InfoxCtx904);a.init(c)},init:function(){var b=window.infoxContextAsyncCallbacks904;if(b){while(true){var a=b.pop();if(a){a()}else{break}}}}};INFOX904.init();